drop table if exists avis;
drop table if exists jeu_plateformes;
drop table if exists jeu;
drop table if exists plateforme;
drop table if exists genre;
drop table if exists classification;
drop table if exists modele_economique;
drop table if exists editeur;
drop table if exists utilisateur;
drop sequence if exists classification_sequence;
drop sequence if exists editeur_seq;
drop sequence if exists genre_seq;
drop sequence if exists modele_economique_sequence;
drop sequence if exists plateforme_sequence;
drop sequence if exists utilisateur_sequence;
create table editeur (date_de_creation date, id bigint not null, nom varchar(255) not null unique, primary key (id));
create table genre (id bigint not null, nom varchar(255), primary key (id));
create table jeu (date_sortie date, classification_id bigint, editeur_id bigint, genre_id bigint, id bigint generated by default as identity, modele_economique_id bigint, moderateur_id bigint, image varchar(255), nom varchar(255), description clob, primary key (id), unique (id, editeur_id));
create table jeu_plateformes (jeux_id bigint not null, plateformes_id bigint not null);
create table modele_economique (id bigint not null, nom varchar(255), primary key (id));
create table plateforme (id bigint not null, nom varchar(85), primary key (id));
create table utilisateur (date_de_naissance date, id bigint not null, dtype varchar(31) not null, email varchar(255) unique, mot_de_passe varchar(255), numero_de_telephone varchar(255), pseudo varchar(255), primary key (id));
create table classification (id bigint not null, nom varchar(85), primary key (id));
create table avis (note float(24) not null check ((note>=0) and (note<=20)), date_envoi timestamp(6), date_moderation timestamp(6), id bigint generated by default as identity, jeu_id bigint not null, joueur_id bigint not null, moderateur_id bigint, description clob, primary key (id));
create index idx_nom on jeu (nom);
alter table if exists avis add constraint FK5nisa41i64dwax7k562n2kv15 foreign key (jeu_id) references jeu;
alter table if exists avis add constraint FKj652o7k7vq5djart3q1hjx7oo foreign key (joueur_id) references utilisateur;
alter table if exists avis add constraint FKahxf715bgcuvbyv4mpl9bcq41 foreign key (moderateur_id) references utilisateur;
alter table if exists jeu add constraint FKq0e50xu74wrv2aqwyeid6usgp foreign key (classification_id) references classification;
alter table if exists jeu add constraint FKoam5qate3lbxev958joegqbjd foreign key (editeur_id) references editeur;
alter table if exists jeu add constraint FKamxts746r8m90pslva358s2i4 foreign key (genre_id) references genre;
alter table if exists jeu add constraint FK6x2vj0yp4lx41a3pw4f71whv foreign key (modele_economique_id) references modele_economique;
alter table if exists jeu add constraint FKto82wcwfid0lx2dvqxuaeygod foreign key (moderateur_id) references utilisateur;
alter table if exists jeu_plateformes add constraint FKfhmu25a8y6f00tqi5yler1vxt foreign key (plateformes_id) references plateforme;
alter table if exists jeu_plateformes add constraint FKskr1un5fc1xrct8cp3dgl3vfu foreign key (jeux_id) references jeu;
create sequence classification_sequence start with 1 increment by 50;
create sequence editeur_seq start with 1 increment by 50;
create sequence genre_seq start with 1 increment by 50;
create sequence modele_economique_sequence start with 1 increment by 50;
create sequence plateforme_sequence start with 1 increment by 50;
create sequence utilisateur_sequence start with 1 increment by 50;